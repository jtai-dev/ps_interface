<!DOCTYPE html>
{% load static %}
<html>

<head>
	<meta charset="utf-8">
	
	<!-- <link rel="stylesheet" href="{% static 'css/bootstrap/bootstrap.min.css' %}"> -->
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-T3c6CoIi6uLrA9TneNEoa7RxnatzjcDSCmG1MXxSR1GAsXEV/Dwwykc2MPK8M2HN" crossorigin="anonymous">
	<!-- <link rel="stylesheet" href="{% static 'css/bootstrap/bootstrap-icons.min.css' %}"> -->
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
	<link rel="stylesheet" href="{% static 'css/base.css' %}">
	{% block extra_head %}
	{% endblock %}

</head>

<body>
	{% block body_block %}
	{% endblock %}
	
	{% block main_container %}
	<div class="row" style="height:100vh;">
		{% block sidebar %}
		<div class="col-2" style="width: 280px;">
			<div id="sidebar" class="d-flex flex-column flex-shrink-0 p-4 fixed-top shadow" >
				<a href="{% url 'index' %}" class="nav-link">
					<div id="sidebar-logo-home" class="d-flex align-items-center">
						<object data="{% static 'img/votesmart-logo-white.svg' %}" type="image/svg+xml" width="40px" height="40px" style=></object>
						<span class="fw-bold ms-2">
							Public Statements
						</span>
					</div>

				</a>
				<hr>
				<ul class="nav flex-column mb-auto">
					<li class="nav-item">
						<a ref="{% url 'ps_harvester:harvester' %}" type="button" class="nav-link align-items-center" 
						   data-bs-toggle="collapse" data-bs-target="#nav-sub-harvester">
							<span class="fw-bold">Harvester</span>
						</a>
						<div id="nav-sub-harvester" class="collapse">
							<ul class="nav flex-column">
								<li class="nav-item">
									<a href="{% url 'ps_harvester:harvester' %}" class="nav-link align-items-center">
										<span>Status</span>
									</a>
								</li>
								<li class="nav-item">
									<a href="{% url 'ps_harvester:file_harvester' %}"
										class="nav-link align-items-center">
										<span>File Harvester</span>
									</a>
								</li>
								<li class="nav-item">
									<a href="{% url 'ps_harvester:web_harvester' %}"
										class="nav-link align-items-center">
										<span>Web Harvester</span>
									</a>
								</li>
							</ul>
						</div>
					</li>
				</ul>
				<hr>
				{% if user.is_authenticated %}
				<div id="user-menu" class="dropdown">
					<a type="button" class="nav-link text-decoration-none" data-bs-toggle="dropdown">
						<div class="d-flex align-items-center">
						{% if request.user.psuserprofile.profile_pic %}
							<img>
						{% else %}
						<i class="bi bi-person-circle" style="font-size: 3rem;"></i>
						{% endif %}
						{% if request.user.psuserprofile.first_name and request.user.psuserprofile.first_name|length <= 25 %}
							<strong class="ms-3">{{request.user.psuserprofile.first_name}}</strong>
						{% else %}
							<strong class="ms-3">@{{request.user.username}}</strong>
						{% endif %}
						</div>
					</a>
					<ul class="dropdown-menu">
						<li><a href="{% url 'ps_auth:logout' %}" class="dropdown-item">Sign out</a></li>
					</ul>
				</div>
				{% else %}
				<div class="mx-3">
					<a class="nav-link" href="{% url 'ps_auth:login' %}">
						<h5 class="fw-bold">Sign In</h5>
					</a>
				</div>

				{% endif %}
			</div>
		</div>
		{% endblock %}

		<div class="col">
			<div id="content-container" class="p-4">
				{% block content_container %}
				{% endblock %}
			</div>
		</div>
	</div>
	{% endblock %}

	<script src="{% static 'js/bootstrap/bootstrap.bundle.min.js' %}"></script>
	<script src="{% static 'js/jQuery/jquery-3.7.1.min.js' %}"></script>
	<script src="{% static 'js/shared.js' %}"></script>
	{% block extra_script %}
	{% endblock %}
	
</body>

</html>